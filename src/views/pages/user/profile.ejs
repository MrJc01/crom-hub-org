<!-- User Profile Dashboard -->
<div class="space-y-8 animate-fade-in">
  <!-- Profile & Stats Grid -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Profile Card (Span 2 cols) -->
    <div
      class="lg:col-span-2 glass rounded-3xl p-8 border border-white/10 relative overflow-hidden group"
    >
      <!-- Background Decorations -->
      <div
        class="absolute -right-10 -top-10 w-64 h-64 bg-primary/20 rounded-full blur-[100px] group-hover:bg-primary/30 transition duration-700"
      ></div>

      <div class="relative flex flex-col md:flex-row items-center gap-8">
        <div class="relative">
          <div
            class="w-32 h-32 rounded-full p-[2px] bg-gradient-to-br from-primary via-purple-500 to-blue-500"
          >
            <div
              class="w-full h-full rounded-full bg-slate-900 flex items-center justify-center text-4xl font-bold text-white relative overflow-hidden"
            >
              <% if (user.avatarUrl) { %>
              <img src="<%= user.avatarUrl %>" class="w-full h-full object-cover" />
              <% } else { %> <%= user.handle[0].toUpperCase() %> <% } %>
            </div>
          </div>
          <div
            class="absolute bottom-2 right-2 w-8 h-8 rounded-full bg-slate-900 border-2 border-slate-800 flex items-center justify-center text-sm shadow-lg"
          >
            ✨
          </div>
        </div>

        <div class="flex-1 text-center md:text-left">
          <div class="flex flex-col md:flex-row md:items-center gap-3 mb-2">
            <h2 class="text-3xl font-bold tracking-tight"><%= user.handle %></h2>
            <div class="flex items-center justify-center gap-2">
              <% if (user.role === 'ADMIN' || user.role === 'SUPERADMIN') { %>
              <span
                class="px-3 py-1 bg-purple-500/20 text-purple-300 rounded-full text-xs font-bold border border-purple-500/30 flex items-center gap-1"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-3 h-3"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 2a1 1 0 011 1v1.323l3.954 1.582 1.599-.8a1 1 0 01.894 1.79l-1.233.616 1.738 5.42a1 1 0 01-.285 1.05A3.989 3.989 0 0115 15a3.989 3.989 0 01-2.667-1.019 1 1 0 01-.633 1.585c-1.096.265-2.267.265-3.363 0a1 1 0 01-.633-1.585A3.989 3.989 0 017 15a3.989 3.989 0 01-2.675-1.127 1 1 0 01-.285-1.05l1.738-5.42-1.233-.616a1 1 0 01.894-1.79l1.599.8L9 4.323V3a1 1 0 011-1z"
                    clip-rule="evenodd"
                  />
                </svg>
                Admin
              </span>
              <% } else { %>
              <span
                class="px-3 py-1 bg-white/10 text-gray-300 rounded-full text-xs font-bold border border-white/10"
              >
                Membro
              </span>
              <% } %>
            </div>
          </div>
          <p class="text-gray-400 mb-6 font-mono text-sm"><%= user.email %></p>

          <div class="flex flex-wrap items-center justify-center md:justify-start gap-4">
            <a
              href="/me/settings"
              class="px-6 py-2.5 bg-white/10 hover:bg-white/20 rounded-xl transition font-medium text-sm flex items-center gap-2 group/btn"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-4 h-4 text-gray-400 group-hover/btn:text-white transition"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"
                />
              </svg>
              Editar Perfil
            </a>
            <a
              href="/auth/logout"
              class="px-6 py-2.5 text-red-400 hover:bg-red-500/10 rounded-xl transition font-medium text-sm"
            >
              Sair
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Stats Column -->
    <div class="space-y-6">
      <!-- Total Donated -->
      <div
        class="glass rounded-3xl p-6 border border-white/10 relative overflow-hidden hover:border-green-500/30 transition duration-300 group"
      >
        <div
          class="absolute -right-6 -bottom-6 text-green-500/5 group-hover:text-green-500/10 transition duration-500"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-32 h-32"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z"
              clip-rule="evenodd"
            />
          </svg>
        </div>
        <p class="text-sm text-gray-400 font-medium uppercase tracking-wider mb-2">Total Doado</p>
        <p class="text-3xl font-bold text-green-400">
          R$ <%= (stats.totalDonated || 0).toFixed(2) %>
        </p>
        <div class="h-1 w-12 bg-green-500/50 rounded-full mt-4"></div>
      </div>

      <!-- Votes -->
      <div
        class="glass rounded-3xl p-6 border border-white/10 relative overflow-hidden hover:border-purple-500/30 transition duration-300 group"
      >
        <div
          class="absolute -right-6 -bottom-6 text-purple-500/5 group-hover:text-purple-500/10 transition duration-500"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-32 h-32"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"
            />
          </svg>
        </div>
        <p class="text-sm text-gray-400 font-medium uppercase tracking-wider mb-2">Votos</p>
        <p class="text-3xl font-bold text-purple-400"><%= stats.voteCount %></p>
        <div class="h-1 w-12 bg-purple-500/50 rounded-full mt-4"></div>
      </div>
    </div>
  </div>

  <!-- Gamification / Progress -->
  <div
    class="p-8 bg-gradient-to-r from-slate-800 to-slate-900 rounded-3xl border border-white/10 relative overflow-hidden"
  >
    <div class="absolute top-0 right-0 p-8 opacity-10">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="w-48 h-48 text-white"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="1"
          d="M13 10V3L4 14h7v7l9-11h-7z"
        />
      </svg>
    </div>

    <div class="relative z-10 max-w-2xl">
      <div class="flex items-center gap-4 mb-4">
        <div class="p-3 bg-primary/20 rounded-xl text-primary">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-6 h-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M13 10V3L4 14h7v7l9-11h-7z"
            />
          </svg>
        </div>
        <div>
          <h3 class="font-bold text-xl text-white">Jornada da Comunidade</h3>
          <p class="text-gray-400 text-sm">Nível 1: Iniciante</p>
        </div>
      </div>

      <p class="text-gray-300 mb-6 leading-relaxed">
        Complete seu perfil e participe das votações para desbloquear badges exclusivas e aumentar
        sua influência na governança do Hub.
      </p>

      <div class="space-y-2">
        <div class="flex justify-between text-xs font-bold uppercase tracking-wider">
          <span class="text-primary">Progresso Atual</span>
          <span class="text-white">45%</span>
        </div>
        <div class="w-full bg-slate-700/50 rounded-full h-3 overflow-hidden">
          <div
            class="bg-gradient-to-r from-primary to-purple-500 h-full rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]"
            style="width: 45%"
          ></div>
        </div>
      </div>
    </div>
  </div>
</div>
